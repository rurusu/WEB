use SuruTest
go
select distinct top(10) P_Menu_Num,user_id,spdate,distance from personal_sport_menu
 where sport_id=10 
 order by 4 desc
 go
 select top(1) user_id,spdate,distance from personal_sport_menu
 where sport_id = 10  and user_id =1
 order by 3 
 go

 create table Ranking
 (user_id int ,
 sport_id int,
 spdate date,
 distance float,
 sets int,
 reps int,
 times time,
 primary key(user_id,sport_id)
 )
 go

 /*查詢指令*/
 use SuruTest
 select *from personal_sport_menu
 go
 select * from bjuser
 go
 /**/
  create table bjuser
 (
 user_id int primary key  identity,
 u_photo nvarchar(max),
 u_name nvarchar(50),
 u_password nvarchar(50),
 u_email nvarchar(50),
 u_birth date,
 u_gender bit
 )
 go
 create table SportType
 (
 SportID int primary key,
 TypeID int ,
 SportName nvarchar(50)
 )
 go

 create table personal_sport_menu
 (
 p_menu_num int primary key identity,
 user_id int REFERENCES bjuser(user_id) ,
 spdate date,
 SportID int REFERENCES SportType (SportID),
 distance float,
 reps int,
 sets int,
 times time,
 finish bit 
 )
 go
 


 
 /*用戶*/
 select* from bjuser
 go
 insert into bjuser(u_name,u_password,u_email,u_birth,u_gender)
values('qoo','qoo','qoo@gmail.com','1990-3-21',1),
('Petty','Petty','petty@gmail.com','1992-3-11',1),
('Jeff','Jeff','jeff@gmail.com','1988-8-11',2),
('Nicole','Nicole','nicole@gmail.com','1985-11-20',1),
('Annie','Annie','annie@hotmail.com','1991-5-22',1),
('Susan','Susan','susan@gmail.com','1988-9-25',1),
('Yevon','Yevon','yevon@gmail.com','1987-2-16',2),
('Scott','Scott','scott@gmail.com','1995-4-11',2),
('Arashi','Arashi','arashi@hotmail.com','1982-8-9',2),
('Plus','Plus','plus@gmail.com','2000-6-11',2),
('Kiddo','Kiddo','kiddo@hotmail.com','1986-3-8',2);

/**運動種類*/
insert into SportType values
(1,1,'三頭肌'),
(2,1,'二頭肌'),
(3,1,'背部'),
(4,1,'肩膀'),
(5,1,'胸部'),
(6,1,'前臂'),
(7,1,'臀肌'),
(8,1,'腹肌肌群'),
(9,2,'健走'),
(10,2,'跑步'),
(11,2,'公路自行車')
go

/*運動紀錄--GPS*/
insert into personal_sport_menu(user_id,spdate,SportID,distance,times,finish) values
(1,'2017-3-23',10,2.5,'1:10:28',1),
(1,'2017-3-23',10,2.5,'1:10:28',1),
(5,'2017-3-23',11,10,'2:10:28',1),
(6,'2017-3-24',9,2.8,'2:30:28',1),
(8,'2017-3-24',10,1.2,'00:20:25',1),
(2,'2017-3-24',9,3.0,'2:10:28',1),
(1,'2017-3-25',11,8,'1:35:17',1),
(2,'2017-3-26',10,2.5,'1:10:28',1),
(5,'2017-3-26',11,10,'2:10:28',1),
(6,'2017-3-26',9,2.8,'2:30:28',1),
(8,'2017-3-26',10,1.2,'00:20:25',1),
(3,'2017-3-26',9,3.0,'2:10:28',1),
(1,'2017-3-27',10,5.2,'1:20:17',1),
(2,'2017-3-28',10,2.5,'1:10:28',1),
(7,'2017-3-28',11,10,'2:10:28',1),
(4,'2017-3-28',9,2.8,'2:30:28',1),
(9,'2017-3-28',10,1.2,'00:20:25',1),
(10,'2017-3-28',9,3.0,'2:10:28',1),
(11,'2017-3-28',11,8,'1:35:17',1),
(4,'2017-3-30',10,2.5,'1:10:28',1),
(5,'2017-3-30',11,10,'2:10:28',1),
(6,'2017-3-30',9,2.8,'2:30:28',1),
(8,'2017-3-30',10,1.2,'00:20:25',1),
(3,'2017-3-30',9,3.2,'2:10:28',1),
(1,'2017-3-30',10,5.1,'1:20:17',1),
(2,'2017-4-1',10,2.5,'1:10:28',1),
(7,'2017-4-1',11,9.8,'2:10:28',1),
(9,'2017-4-1',10,1.8,'00:20:25',1),
(10,'2017-4-1',9,3.1,'2:10:28',1),
(11,'2017-4-1',11,8,'1:35:17',1),
(4,'2017-4-2',10,2.5,'1:10:28',1),
(5,'2017-4-2',11,10,'2:10:28',1),
(6,'2017-4-2',9,2.8,'2:30:28',1),
(8,'2017-4-2',10,1.2,'00:20:25',1),
(3,'2017-4-2',9,2.95,'2:10:28',1),
(1,'2017-4-2',10,5.2,'1:20:17',1),
(7,'2017-4-3',10,2.5,'1:10:28',1),
(9,'2017-4-3',11,9.32,'2:10:28',1),
(10,'2017-4-3',10,1.2,'00:20:25',1),
(2,'2017-4-3',9,2.89,'2:10:28',1),
(11,'2017-4-3',11,8,'1:35:17',1),
(5,'2017-4-4',10,2.5,'1:10:28',1),
(1,'2017-4-4',11,10,'2:10:28',1),
(8,'2017-4-4',9,2.8,'2:30:28',1),
(4,'2017-4-4',10,1.2,'00:20:25',1),
(6,'2017-4-4',9,3.0,'2:10:28',1),
(3,'2017-4-4',10,5.13,'1:20:17',1),
(9,'2017-4-5',10,2.36,'1:10:28',1),
(11,'2017-4-5',11,8.72,'2:10:28',1),
(2,'2017-4-5',10,1.32,'00:20:25',1),
(10,'2017-4-5',9,3.0,'2:10:28',1),
(7,'2017-4-5',11,8,'1:35:17',1),
(8,'2017-4-6',10,2.5,'1:10:28',1),
(5,'2017-4-6',11,10,'2:10:28',1),
(3,'2017-4-6',9,2.8,'2:30:28',1),
(6,'2017-4-6',10,1.2,'00:20:25',1),
(1,'2017-4-6',9,3.65,'2:10:28',1),
(4,'2017-4-6',10,5.2,'1:20:17',1),
(11,'2017-4-7',10,2.5,'1:10:28',1),
(7,'2017-4-7',11,10,'2:10:28',1),
(10,'2017-4-7',10,1.2,'00:20:25',1),
(2,'2017-4-7',9,3.0,'2:10:28',1),
(9,'2017-4-7',11,8.72,'1:35:17',1),
(5,'2017-4-8',10,2.5,'1:10:28',1),
(1,'2017-4-8',11,10.56,'2:10:28',1),
(8,'2017-4-8',9,2.8,'2:30:28',1),
(4,'2017-4-8',10,1.2,'00:20:25',1),
(6,'2017-4-8',9,2.93,'2:10:28',1),
(3,'2017-4-8',10,5.2,'1:20:17',1),
(9,'2017-4-9',10,2.5,'1:10:28',1),
(11,'2017-4-9',11,10,'2:10:28',1),
(2,'2017-4-9',10,1.2,'00:20:25',1),
(10,'2017-4-9',9,3.0,'2:10:28',1),
(7,'2017-4-9',11,8,'1:35:17',1),
(8,'2017-4-10',10,2.5,'1:10:28',1),
(5,'2017-4-10',11,10,'2:10:28',1),
(3,'2017-4-10',9,2.8,'2:30:28',1),
(6,'2017-4-10',10,1.2,'00:20:25',1),
(1,'2017-4-10',9,3.0,'2:10:28',1),
(4,'2017-4-10',10,5.2,'1:20:17',1),
(11,'2017-4-11',10,2.5,'1:10:28',1),
(7,'2017-4-1',11,10,'2:10:28',1),
(10,'2017-4-11',10,1.2,'00:20:25',1),
(2,'2017-4-11',9,3.0,'2:10:28',1),
(9,'2017-4-11',11,8,'1:35:17',1),
(4,'2017-4-12',10,2.5,'1:10:28',1),
(3,'2017-4-12',11,10,'2:10:28',1),
(8,'2017-4-12',9,2.8,'2:30:28',1),
(5,'2017-4-12',10,1.2,'00:20:25',1),
(6,'2017-4-12',9,3.0,'2:10:28',1),
(1,'2017-4-12',10,5.2,'1:20:17',1),
(9,'2017-4-13',10,2.5,'1:10:28',1),
(11,'2017-4-13',11,10,'2:10:28',1),
(2,'2017-4-13',10,1.2,'00:20:25',1),
(10,'2017-4-13',9,3.0,'2:10:28',1),
(7,'2017-4-13',11,8,'1:35:17',1),
(8,'2017-4-14',10,2.5,'1:10:28',1),
(5,'2017-4-14',11,10,'2:10:28',1),
(3,'2017-4-14',9,2.8,'2:30:28',1),
(6,'2017-4-14',10,1.2,'00:20:25',1),
(1,'2017-4-14',9,3.0,'2:10:28',1),
(4,'2017-4-14',10,5.2,'1:20:17',1)
go



/*drop*/
drop table personal_sport_menu
go
drop table Ranking
go